<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Order Analysis</title>
    <style>
        :root{--bg:#f5f5f5;--card:#ffffff;--accent:#007bff;--muted:#666666;--border:#dddddd}
        *{box-sizing:border-box}
        body{font-family:Arial,sans-serif;margin:0;background:var(--bg);color:#333}
        header{padding:20px;text-align:center;background:var(--card);border-bottom:1px solid var(--border)}
        h1{margin:0;font-size:1.5rem}
        .container{max-width:1000px;margin:20px auto;padding:16px}
        .grid{display:grid;grid-template-columns:1fr 320px;gap:20px}
        .card{background:var(--card);padding:20px;border:1px solid var(--border);border-radius:4px}
        .small{font-size:0.9rem;color:var(--muted)}
        pre{white-space:pre-wrap;word-break:break-word;margin:0;background:#f8f9fa;padding:12px;border:1px solid var(--border);border-radius:4px}
        .controls{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:15px}
        button{background:var(--accent);color:#fff;border:none;padding:10px 16px;border-radius:4px;cursor:pointer;font-size:14px}
        button.secondary{background:var(--muted)}
        button:hover{opacity:0.9}
        table{width:100%;border-collapse:collapse;margin-top:10px}
        th,td{padding:10px;border-bottom:1px solid var(--border);text-align:left}
        th{background:#f8f9fa;font-weight:bold}
        @media(max-width:880px){.grid{grid-template-columns:1fr}}
    </style>
</head>
<body>
    <header>
        <h1>Order / Data Analysis</h1>
        <p class="small">Numbers & products aggregation (filter, reduce, group)</p>
    </header>

    <div class="container">
        <div class="grid">
            <div>
                <div class="card">
                    <div class="controls">
                        <button id="runBtn">Run Analysis</button>
                        <button id="resetBtn" class="secondary">Reset Data</button>
                    </div>

                    <h3>Input</h3>
                    <div class="small card" style="background:transparent;padding:0;border:none">
                        <p class="small">Numbers:</p>
                        <pre id="numbersInput"></pre>
                        <p class="small" style="margin-top:10px">Products:</p>
                        <pre id="productsInput"></pre>
                    </div>

                    <h3 style="margin-top:15px">Results</h3>
                    <p class="small">Even numbers:</p>
                    <pre id="evenNumbers">-</pre>

                    <p class="small" style="margin-top:10px">Sum of numbers:</p>
                    <pre id="sum">-</pre>

                    <p class="small" style="margin-top:10px">Total price of products:</p>
                    <pre id="totalPrice">-</pre>

                    <p class="small" style="margin-top:10px">Total of expensive items (&gt;100):</p>
                    <pre id="expensiveTotal">-</pre>
                </div>

                <div class="card" style="margin-top:15px">
                    <h3>Filtered / Grouped</h3>
                    <p class="small">Electronics (filtered):</p>
                    <pre id="electronics">-</pre>

                    <p class="small" style="margin-top:10px">Grouped by category:</p>
                    <pre id="grouped">-</pre>
                </div>
            </div>

            <aside>
                <div class="card">
                    <h3>Products Table</h3>
                    <table id="productsTable">
                        <thead><tr><th>Name</th><th>Category</th><th style="text-align:right">Price</th></tr></thead>
                        <tbody></tbody>
                    </table>
                </div>

                <div class="card" style="margin-top:15px">
                    <h3>Notes</h3>
                    <p class="small">This single-file page runs the original JS logic and prints the outputs into the DOM for easier inspection. Use "Run Analysis" to (re)compute values.</p>
                </div>
            </aside>
        </div>
    </div>

    <script>
        let numbers = [1,2,3,4,5,6,7,8,9,10];
        let products = [
            { name: 'Laptop', price: 999, category: 'electronics' },
            { name: 'Book', price: 15, category: 'education' },
            { name: 'Phone', price: 699, category: 'electronics' },
            { name: 'Pen', price: 2, category: 'office' }
        ];

        function fmt(v){return JSON.stringify(v,null,2)}

        const numbersInput = document.getElementById('numbersInput');
        const productsInput = document.getElementById('productsInput');
        const productsTableBody = document.querySelector('#productsTable tbody');

        function renderInputs(){
            numbersInput.textContent = fmt(numbers);
            productsInput.textContent = fmt(products);
            productsTableBody.innerHTML = products.map(p=>`<tr><td>${escapeHtml(p.name)}</td><td>${escapeHtml(p.category)}</td><td style="text-align:right">${p.price.toFixed(2)}</td></tr>`).join('');
        }

        function escapeHtml(s){return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')}

        function runAnalysis(){
            const evenNumbers = numbers.filter(n=> n%2===0);
            document.getElementById('evenNumbers').textContent = fmt(evenNumbers);

            const electronics = products.filter(p=> p.category === 'electronics');
            document.getElementById('electronics').textContent = fmt(electronics);

            const sum = numbers.reduce((a,b)=> a+b, 0);
            document.getElementById('sum').textContent = sum;

            const totalPrice = products.reduce((a,p)=> a + (Number(p.price) || 0), 0);
            document.getElementById('totalPrice').textContent = totalPrice.toFixed(2);

            const groupedByCategory = products.reduce((acc,p)=>{
                if(!acc[p.category]) acc[p.category] = [];
                acc[p.category].push(p);
                return acc;
            }, {});
            document.getElementById('grouped').textContent = fmt(groupedByCategory);

            const expensiveTotal = products.filter(p=> p.price > 100).reduce((a,p)=> a + p.price, 0);
            document.getElementById('expensiveTotal').textContent = expensiveTotal.toFixed(2);

            console.log({evenNumbers, electronics, sum, totalPrice, groupedByCategory, expensiveTotal});
        }

        document.getElementById('runBtn').addEventListener('click', ()=>{
            runAnalysis();
        });

        document.getElementById('resetBtn').addEventListener('click', ()=>{
            numbers = [1,2,3,4,5,6,7,8,9,10];
            products = [
                { name: 'Laptop', price: 999, category: 'electronics' },
                { name: 'Book', price: 15, category: 'education' },
                { name: 'Phone', price: 699, category: 'electronics' },
                { name: 'Pen', price: 2, category: 'office' }
            ];
            renderInputs();
            runAnalysis();
        });

        renderInputs();
        runAnalysis();
    </script>
</body>
</html>
